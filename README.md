# Collaborators

Collaborators for this repository include:
* Patryk Jankowicz ([GitHub](https://github.com/PatrykSJ)), Warsaw University of Technology
* Miłosz Kutyła ([GitHub](https://github.com/mkutyla)), Warsaw University of Technology
* Jan Walczak ([GitHub](https://github.com/JanWalczak)), Warsaw University of Technology


# MyLang → LLVM IR (ANTLR4 + Python)




This repository is a prototype compiler for a custom language (“MyLang”).  
It uses **ANTLR4 (Python target, Visitor pattern)** for parsing and a custom **LLVM IR code generator** to produce `program.ll`, then compiles it with **clang** into a native executable.

## What it does

Pipeline (high level):

1. **Generate lexer/parser** from `Grammar/MyLang.g4` into `LexerParser/` (ignored by git)
2. **Parse** a source file (examples in `TestFiles/`)
3. **Emit LLVM IR** to `Output/program.ll`
4. **Compile** via `clang` to `Output/program.exe`
5. (Optional) **Render parse tree** to `Output/Source.pdf` using Graphviz

## Language features implemented (based on grammar + codegen)

- Primitive types: `int`, `float`, `double`, `bool`, `string`
- Dynamic declarations via `var`
- Statements: `print(expr);`, `read(x);`
- Control flow:
  - `if (...) { ... } else { ... }`
  - `while (...) { ... }`
  - `for (init; cond; step) { ... }`
  - `for (name in expr) { ... }` (foreach form)
- Functions:
  - `func name(params) { ... }`
  - `return expr?;`
- Generators:
  - `generator name(params) { ... yield expr?; ... }`
  - `generator<T>` type in the grammar (examples use `.next()` and `.current`)
- Arrays:
  - fixed-size, multi-dimensional: `int[3][3] m = {{1,2,3},{4,5,6},{7,8,9}};`
  - indexing: `a[i]`
  - slicing/ranges: `a[:2]`, `a[1:]`, `a[:]`
- Structs:
  - `struct S { int x; string y; int[3] z; }`
  - field access and assignment
- Classes:
  - `class C { ... constructor(...) { ... } func ... }`
  - object creation: `new C(...)`
  - member access via `.`

If you see example files using types like `float32` / `float64`, treat them as experimental/test text unless you’ve extended the mapping in codegen (the core mapping is for `float`/`double`).

## Project layout

- `Grammar/`
  - `MyLang.g4` — ANTLR grammar
  - `antlr-4.13.2-complete.jar` — ANTLR jar shipped with the repo
- `Main/`
  - `main.py` — parsing + parse-tree rendering + IR emission
  - `LLVMActions.py` — AST visitor with semantic actions and IR emission calls
  - `LLVMGenerator.py` — LLVM IR builder helpers
- `TestFiles/` — sample programs (file extension does not matter)
- `builder.py` — convenience script: generate parser → compile source → run clang → execute
- `LexerParser/` — generated by ANTLR (not committed)
- `Output/` — build artifacts (not committed)

## Requirements

### System
- **Java** (to run ANTLR jar)
- **clang** (LLVM toolchain)
- **Graphviz** (optional, for rendering parse tree PDF)

### Python
- Python 3.9+ recommended
- Packages:
  - `antlr4-python3-runtime`
  - `graphviz`
  - `numpy`

Install:
```bash
pip install antlr4-python3-runtime graphviz numpy
